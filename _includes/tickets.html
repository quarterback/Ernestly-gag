<section class="usa-section">
  <div class="grid-container usa-prose">
    <h1 class="usa-heading-xl">Badge Tiers</h1>
    <p class="usa-intro">
      Access is identity. Choose your Ernestly badge to signal your alignment, intention, and contribution to the disruption layer.
    </p>

    <div class="usa-card-group grid-row grid-gap" id="badge-grid">

      <!-- Each badge has a "loading" state that swaps out on page load via JS -->

      {% assign badges = 
        [
          {
            "name": "Shadow Stakeholder",
            "icon": "eye-off",
            "price": "$88.00",
            "desc": "Signal alignment from afar. Includes general admission and light institutional critique."
          },
          {
            "name": "Protocol Adjacent",
            "icon": "share-2",
            "price": "$288.00",
            "desc": "You don’t build, but you definitely advise. Includes breakout access and hallway gravitas."
          },
          {
            "name": "Civic Liquidity Provider",
            "icon": "droplet",
            "price": "$888.00",
            "desc": "Grants access to Grift Track™, off-chain lounges, and panelist nodding privileges."
          },
          {
            "name": "Alignment Architect",
            "icon": "compass",
            "price": "$8,888.00",
            "desc": "All-access, off-chain dinners, governance veto visibility. Comes with a velvet pouch."
          }
        ]
      %}

      {% for badge in badges %}
      <div class="usa-card tablet:grid-col-6 desktop:grid-col-3">
        <div class="usa-card__container badge-card" data-loaded="false">
          <div class="usa-card__header">
            <h2 class="usa-card__heading">{{ badge.name }}</h2>
          </div>
          <div class="usa-card__media">
            <div class="badge-loader">
              <p class="text-center text-base">Resolving {{ badge.name | split: " " | last | downcase }} metadata...</p>
            </div>
            <i data-lucide="{{ badge.icon }}" class="badge-icon" style="width: 40px; height: 40px; display: none;"></i>
          </div>
          <div class="usa-card__body" style="opacity: 0;">
            <p class="text-base text-bold">{{ badge.price }}</p>
            <p class="margin-top-1">{{ badge.desc }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <p class="margin-top-4">
      <strong>Note:</strong> Badges are non-fungible, non-refundable, and temporarily unavailable during DAO cooldowns.
    </p>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".badge-card");

    cards.forEach((card, i) => {
      const delay = 800 + Math.random() * 1200;

      setTimeout(() => {
        card.setAttribute("data-loaded", "true");
        card.querySelector(".badge-loader").style.display = "none";
        card.querySelector(".badge-icon").style.display = "block";
        card.querySelector(".usa-card__body").style.opacity = 1;
      }, delay);
    });
  });
</script>
