<section class="usa-section">
  <div class="grid-container usa-prose">
    <h1 class="usa-heading-xl">Badge Tiers</h1>
    <p class="usa-intro">
      Choose your access. All badge metadata is resolved via our civic-preferred coordination layer.
    </p>

    <div class="usa-card-group grid-row grid-gap" id="badge-grid">

      {% assign badges = 
        [
          {
            "name": "Shadow Stakeholder",
            "icon": "eye-off",
            "price": "$88.00",
            "desc": "Signal alignment from afar. Includes general admission and light institutional critique."
          },
          {
            "name": "Protocol Adjacent",
            "icon": "share-2",
            "price": "$288.00",
            "desc": "You don’t build, but you definitely advise. Includes breakout access and hallway gravitas."
          },
          {
            "name": "Civic Liquidity Provider",
            "icon": "droplet",
            "price": "$888.00",
            "desc": "Grants access to Grift Track™, off-chain lounges, and panelist nodding privileges."
          },
          {
            "name": "Alignment Architect",
            "icon": "compass",
            "price": "$8,888.00",
            "desc": "All-access, off-chain dinners, governance veto visibility. Comes with a velvet pouch."
          }
        ]
      %}

      {% for badge in badges %}
      <div class="usa-card tablet:grid-col-6 desktop:grid-col-3">
        <div class="usa-card__container badge-card" data-loaded="false">
          <div class="usa-card__header">
            <h2 class="usa-card__heading">{{ badge.name }}</h2>
          </div>
          <div class="usa-card__media">
            <div class="badge-loader">
              <div class="badge-status-text text-center text-base">Verifying badge credentials…</div>
              <div class="badge-progress-bar">
                <div class="badge-progress-fill" style="width: 0%;"></div>
              </div>
            </div>
            <i data-lucide="{{ badge.icon }}" class="badge-icon" style="width: 40px; height: 40px; display: none;"></i>
          </div>
          <div class="usa-card__body" style="opacity: 0;">
            <p class="text-base text-bold">{{ badge.price }}</p>
            <p class="margin-top-1">{{ badge.desc }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <p class="margin-top-4">
      <strong>Note:</strong> All badge tiers are dynamically minted at rest and subject to governance latency.
    </p>
  </div>
</section>

<style>
  .badge-progress-bar {
    width: 100%;
    height: 6px;
    background-color: #e6e6e6;
    border-radius: 3px;
    overflow: hidden;
    margin-top: 0.5rem;
  }
  .badge-progress-fill {
    height: 100%;
    background-color: #00ccbc;
    transition: width 1.5s ease-out;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".badge-card");

    cards.forEach((card, i) => {
      const fill = card.querySelector(".badge-progress-fill");
      const icon = card.querySelector(".badge-icon");
      const body = card.querySelector(".usa-card__body");
      const loader = card.querySelector(".badge-loader");

      // Simulate loading progression
      setTimeout(() => {
        fill.style.width = "100%";
      }, 200); // Start a little after DOM loads

      // Fully reveal after progress completes
      setTimeout(() => {
        loader.style.display = "none";
        icon.style.display = "block";
        body.style.opacity = 1;
        card.setAttribute("data-loaded", "true");
      }, 1700); // Match progress animation time
    });
  });
</script>
